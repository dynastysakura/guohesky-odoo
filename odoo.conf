[options]
addons_path = /mnt/extra-addons
data_dir = /var/lib/odoo

; ===================
; 数据库配置
; ===================
; db_host, db_user, db_password 由 Docker 环境变量自动注入
db_template = template0

; 生产环境安全：限制只能访问特定数据库
; 使用 %d 匹配子域名，如 odoo.guohesky.com 会匹配 "odoo" 数据库
; dbfilter = ^%d$

; 指定数据库名（配合 init 参数首次启动时自动创建）
db_name = odoo

; 生产安全：禁用数据库列表（配合 db_name 使用）
list_db = False

; 首次启动时初始化的模块（数据库存在后可注释掉）
init = base

; ===================
; 安全设置（重要！）
; ===================
; 数据库管理主密码 - 部署后务必修改！
; 官方推荐：用强密码保护数据库管理器，而非禁用
admin_passwd = CHANGE_ME_IMMEDIATELY

; ===================
; 反向代理配置
; ===================
proxy_mode = True
http_interface = 0.0.0.0

; ===================
; 生产环境配置
; ===================
without_demo = True

; ===================
; 日志配置
; ===================
; 不设置 logfile，默认输出到 stderr，由 Docker 收集
; 生产环境用 warn，调试时可改为 info 或 debug
log_level = warn

; ===================
; 多进程配置（2核2G 优化）
; ===================
; 官方公式: workers = (CPU × 2) + 1，2核理论值=5
; 受内存限制，实际使用 2 workers
; 预计支持 6-12 并发用户
; 内存使用: 2 × 350MB ≈ 700MB
workers = 2
max_cron_threads = 1

; 内存限制（2GB 内存优化，折中方案）
; soft: 576MB - 平衡稳定性和大操作需求
; hard: 1GB - 防止单请求吃光内存
limit_memory_soft = 603979776
limit_memory_hard = 1073741824

; 请求限制（低配服务器适当降低）
limit_request = 4096
limit_time_cpu = 300
limit_time_real = 600
