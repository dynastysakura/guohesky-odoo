[options]
addons_path = /mnt/extra-addons
data_dir = /var/lib/odoo

; ===================
; 数据库配置
; ===================
; db_host, db_user, db_password 由 Docker 环境变量自动注入
db_name = False
db_template = template0

; 生产环境安全：限制只能访问特定数据库
; 使用 %d 匹配子域名，如 odoo.guohesky.com 会匹配 "odoo" 数据库
; 或者直接写数据库名，如 ^guohesky$
dbfilter = ^%d$

; ===================
; 安全设置（重要！）
; ===================
; 数据库管理主密码 - 部署后务必修改！
; 用于创建/删除/备份数据库的权限验证
admin_passwd = CHANGE_ME_IMMEDIATELY

; 生产环境设为 False，禁止在登录页显示数据库列表
list_db = False

; ===================
; 反向代理配置
; ===================
proxy_mode = True

; ===================
; 生产环境配置
; ===================
without_demo = all

; ===================
; 日志配置
; ===================
log_level = warn
logfile = /var/lib/odoo/odoo.log

; ===================
; 多进程配置（官方文档推荐值）
; ===================
; 官方公式: workers = (CPU × 2) + 1
; 官方公式: 1 worker ≈ 6 并发用户
; 官方公式: RAM = workers × ((0.8 × 150MB) + (0.2 × 1024MB))
;
; 2核2G 服务器:
; - 理论 workers = (2 × 2) + 1 = 5
; - 但 2G 内存较紧张，建议 workers = 2 或 3
; - 预计支持 12-18 并发用户
workers = 2
max_cron_threads = 1

; 内存限制（官方生产环境配置）
; 来源: https://github.com/odoo/documentation/blob/19.0/content/administration/on_premise/deploy.rst
limit_memory_soft = 629145600
limit_memory_hard = 1677721600

; 请求限制
limit_request = 8192
limit_time_cpu = 600
limit_time_real = 1200
