[options]
addons_path = /mnt/extra-addons
data_dir = /var/lib/odoo

; ===================
; 数据库配置
; ===================
; db_host, db_user, db_password 由 Docker 环境变量自动注入
db_name = False
db_template = template0

; 生产环境安全：限制只能访问特定数据库
; 使用 %d 匹配子域名，如 odoo.guohesky.com 会匹配 "odoo" 数据库
; 或者直接写数据库名，如 ^guohesky$
dbfilter = ^%d$

; ===================
; 安全设置（重要！）
; ===================
; 数据库管理主密码 - 部署后务必修改！
; 用于创建/删除/备份数据库的权限验证
admin_passwd = CHANGE_ME_IMMEDIATELY

; 生产环境设为 False，禁止在登录页显示数据库列表
list_db = False

; ===================
; 反向代理配置
; ===================
proxy_mode = True

; ===================
; 生产环境配置
; ===================
without_demo = all

; ===================
; 日志配置
; ===================
log_level = warn
; 生产环境建议输出到 stdout，由 Docker 收集
; logfile = False
logfile = /var/lib/odoo/odoo.log

; ===================
; 性能配置
; ===================
; workers 计算公式: (CPU核心数 * 2) + 1
; 小型服务器（1-2核）建议 2-4
workers = 2
max_cron_threads = 1

; 内存限制（防止单个请求耗尽内存）
; soft: 2GB, hard: 2.5GB
limit_memory_soft = 2147483648
limit_memory_hard = 2684354560

; 请求时间限制
limit_time_cpu = 600
limit_time_real = 1200

; 每个 worker 处理的最大请求数（防止内存泄漏）
limit_request = 8192
